<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>UhmServer: libuhttpmock Reference Manual</title>
<meta name="generator" content="DocBook XSL Stylesheets Vsnapshot">
<link rel="home" href="index.html" title="libuhttpmock Reference Manual">
<link rel="up" href="ch04.html" title="Core API">
<link rel="prev" href="libuhttpmock-0.0-Version-Information.html" title="Version Information">
<link rel="next" href="UhmResolver.html" title="UhmResolver">
<meta name="generator" content="GTK-Doc V1.32.1 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="5"><tr valign="middle">
<td width="100%" align="left" class="shortcuts">
<a href="#" class="shortcut">Top</a><span id="nav_description">  <span class="dim">|</span> 
                  <a href="#UhmServer.description" class="shortcut">Description</a></span><span id="nav_hierarchy">  <span class="dim">|</span> 
                  <a href="#UhmServer.object-hierarchy" class="shortcut">Object Hierarchy</a></span><span id="nav_properties">  <span class="dim">|</span> 
                  <a href="#UhmServer.properties" class="shortcut">Properties</a></span><span id="nav_signals">  <span class="dim">|</span> 
                  <a href="#UhmServer.signals" class="shortcut">Signals</a></span>
</td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="16" height="16" border="0" alt="Home"></a></td>
<td><a accesskey="u" href="ch04.html"><img src="up.png" width="16" height="16" border="0" alt="Up"></a></td>
<td><a accesskey="p" href="libuhttpmock-0.0-Version-Information.html"><img src="left.png" width="16" height="16" border="0" alt="Prev"></a></td>
<td><a accesskey="n" href="UhmResolver.html"><img src="right.png" width="16" height="16" border="0" alt="Next"></a></td>
</tr></table>
<div class="refentry">
<a name="UhmServer"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="UhmServer.top_of_page"></a>UhmServer</span></h2>
<p>UhmServer — mock HTTP(S) server</p>
</td>
<td class="gallery_image" valign="top" align="right"></td>
</tr></table></div>
<div class="refsect1">
<a name="UhmServer.stability-level"></a><h2>Stability Level</h2>
<acronym title="Unstable interfaces are experimental or transitional. They are typically used to
give outside developers early access to new or rapidly changing technology, or
to provide an interim solution to a problem where a more general solution is
anticipated. No claims are made about either source or binary compatibility from
one minor release to the next.

The Unstable interface level is a warning that these interfaces are  subject to
change without warning and should not be used in unbundled products.

Given such caveats, customer impact need not be a factor when considering
incompatible changes to an Unstable interface in a major or minor release.
Nonetheless, when such changes are introduced, the changes should still be
mentioned in the release notes for the affected release.
"><span class="acronym">Unstable</span></acronym>, unless otherwise indicated
</div>
<div class="refsect1">
<a name="UhmServer.functions"></a><h2>Functions</h2>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="functions_proto_type">
<col class="functions_proto_name">
</colgroup>
<tbody>
<tr>
<td class="function_type">
<a class="link" href="UhmServer.html" title="UhmServer"><span class="returnvalue">UhmServer</span></a> *
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-new" title="uhm_server_new ()">uhm_server_new</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-run" title="uhm_server_run ()">uhm_server_run</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-stop" title="uhm_server_stop ()">uhm_server_stop</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-start-trace" title="uhm_server_start_trace ()">uhm_server_start_trace</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-start-trace-full" title="uhm_server_start_trace_full ()">uhm_server_start_trace_full</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-end-trace" title="uhm_server_end_trace ()">uhm_server_end_trace</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-load-trace" title="uhm_server_load_trace ()">uhm_server_load_trace</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-load-trace-async" title="uhm_server_load_trace_async ()">uhm_server_load_trace_async</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-load-trace-finish" title="uhm_server_load_trace_finish ()">uhm_server_load_trace_finish</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-unload-trace" title="uhm_server_unload_trace ()">uhm_server_unload_trace</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gulong</span>
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-filter-ignore-parameter-values" title="uhm_server_filter_ignore_parameter_values ()">uhm_server_filter_ignore_parameter_values</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-compare-messages-remove-filter" title="uhm_server_compare_messages_remove_filter ()">uhm_server_compare_messages_remove_filter</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-received-message-chunk" title="uhm_server_received_message_chunk ()">uhm_server_received_message_chunk</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-received-message-chunk-with-direction" title="uhm_server_received_message_chunk_with_direction ()">uhm_server_received_message_chunk_with_direction</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-received-message-chunk-from-soup" title="uhm_server_received_message_chunk_from_soup ()">uhm_server_received_message_chunk_from_soup</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gboolean</span>
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-get-enable-logging" title="uhm_server_get_enable_logging ()">uhm_server_get_enable_logging</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-set-enable-logging" title="uhm_server_set_enable_logging ()">uhm_server_set_enable_logging</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">gboolean</span>
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-get-enable-online" title="uhm_server_get_enable_online ()">uhm_server_get_enable_online</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-set-enable-online" title="uhm_server_set_enable_online ()">uhm_server_set_enable_online</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">GFile</span> *
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-get-trace-directory" title="uhm_server_get_trace_directory ()">uhm_server_get_trace_directory</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-set-trace-directory" title="uhm_server_set_trace_directory ()">uhm_server_set_trace_directory</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">GTlsCertificate</span> *
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-get-tls-certificate" title="uhm_server_get_tls_certificate ()">uhm_server_get_tls_certificate</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-set-tls-certificate" title="uhm_server_set_tls_certificate ()">uhm_server_set_tls_certificate</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">GTlsCertificate</span> *
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-set-default-tls-certificate" title="uhm_server_set_default_tls_certificate ()">uhm_server_set_default_tls_certificate</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">void</span>
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-set-expected-domain-names" title="uhm_server_set_expected_domain_names ()">uhm_server_set_expected_domain_names</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">const <span class="returnvalue">gchar</span> *
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-get-address" title="uhm_server_get_address ()">uhm_server_get_address</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<span class="returnvalue">guint</span>
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-get-port" title="uhm_server_get_port ()">uhm_server_get_port</a> <span class="c_punctuation">()</span>
</td>
</tr>
<tr>
<td class="function_type">
<a class="link" href="UhmResolver.html" title="UhmResolver"><span class="returnvalue">UhmResolver</span></a> *
</td>
<td class="function_name">
<a class="link" href="UhmServer.html#uhm-server-get-resolver" title="uhm_server_get_resolver ()">uhm_server_get_resolver</a> <span class="c_punctuation">()</span>
</td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="UhmServer.properties"></a><h2>Properties</h2>
<div class="informaltable"><table class="informaltable" border="0">
<colgroup>
<col width="150px" class="properties_type">
<col width="300px" class="properties_name">
<col width="200px" class="properties_flags">
</colgroup>
<tbody>
<tr>
<td class="property_type">
<span class="type">gchar</span> *</td>
<td class="property_name"><a class="link" href="UhmServer.html#UhmServer--address" title="The “address” property">address</a></td>
<td class="property_flags">Read</td>
</tr>
<tr>
<td class="property_type"><span class="type">gboolean</span></td>
<td class="property_name"><a class="link" href="UhmServer.html#UhmServer--enable-logging" title="The “enable-logging” property">enable-logging</a></td>
<td class="property_flags">Read / Write</td>
</tr>
<tr>
<td class="property_type"><span class="type">gboolean</span></td>
<td class="property_name"><a class="link" href="UhmServer.html#UhmServer--enable-online" title="The “enable-online” property">enable-online</a></td>
<td class="property_flags">Read / Write</td>
</tr>
<tr>
<td class="property_type"><span class="type">guint</span></td>
<td class="property_name"><a class="link" href="UhmServer.html#UhmServer--port" title="The “port” property">port</a></td>
<td class="property_flags">Read</td>
</tr>
<tr>
<td class="property_type">
<a class="link" href="UhmResolver.html" title="UhmResolver"><span class="type">UhmResolver</span></a> *</td>
<td class="property_name"><a class="link" href="UhmServer.html#UhmServer--resolver" title="The “resolver” property">resolver</a></td>
<td class="property_flags">Read</td>
</tr>
<tr>
<td class="property_type">
<span class="type">GTlsCertificate</span> *</td>
<td class="property_name"><a class="link" href="UhmServer.html#UhmServer--tls-certificate" title="The “tls-certificate” property">tls-certificate</a></td>
<td class="property_flags">Read / Write</td>
</tr>
<tr>
<td class="property_type">
<span class="type">GFile</span> *</td>
<td class="property_name"><a class="link" href="UhmServer.html#UhmServer--trace-directory" title="The “trace-directory” property">trace-directory</a></td>
<td class="property_flags">Read / Write</td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="UhmServer.signals"></a><h2>Signals</h2>
<div class="informaltable"><table class="informaltable" border="0">
<colgroup>
<col width="150px" class="signal_proto_type">
<col width="300px" class="signal_proto_name">
<col width="200px" class="signal_proto_flags">
</colgroup>
<tbody>
<tr>
<td class="signal_type"><span class="returnvalue">gboolean</span></td>
<td class="signal_name"><a class="link" href="UhmServer.html#UhmServer-compare-messages" title="The “compare-messages” signal">compare-messages</a></td>
<td class="signal_flags">Run Last</td>
</tr>
<tr>
<td class="signal_type"><span class="returnvalue">gboolean</span></td>
<td class="signal_name"><a class="link" href="UhmServer.html#UhmServer-handle-message" title="The “handle-message” signal">handle-message</a></td>
<td class="signal_flags">Run Last</td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="UhmServer.other"></a><h2>Types and Values</h2>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="other_proto_type">
<col class="other_proto_name">
</colgroup>
<tbody>
<tr>
<td class="datatype_keyword"> </td>
<td class="function_name"><a class="link" href="UhmServer.html#UhmServer-struct" title="UhmServer">UhmServer</a></td>
</tr>
<tr>
<td class="datatype_keyword"> </td>
<td class="function_name"><a class="link" href="UhmServer.html#UhmServerClass" title="UhmServerClass">UhmServerClass</a></td>
</tr>
<tr>
<td class="datatype_keyword">enum</td>
<td class="function_name"><a class="link" href="UhmServer.html#UhmServerError" title="enum UhmServerError">UhmServerError</a></td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect1">
<a name="UhmServer.object-hierarchy"></a><h2>Object Hierarchy</h2>
<pre class="screen">    GObject
    <span class="lineart">╰──</span> UhmServer
</pre>
</div>
<div class="refsect1">
<a name="UhmServer.includes"></a><h2>Includes</h2>
<pre class="synopsis">#include &lt;libuhttpmock/uhm-server.h&gt;
</pre>
</div>
<div class="refsect1">
<a name="UhmServer.description"></a><h2>Description</h2>
<p>This is a mock HTTPS server which can be used to run unit tests of network client code on a loopback interface rather than on the real Internet.
At its core, it's a simple HTTPS server which runs on a loopback address on an arbitrary port. The code under test must be modified to send its
requests to this port, although <a class="link" href="UhmResolver.html" title="UhmResolver"><span class="type">UhmResolver</span></a> may be used to transparently redirect all IP addresses to the mock server.
A convenience layer on the mock server provides loading of and recording to trace files, which are sequences of request–response HTTPS message pairs
where each request is expected by the server (in order). On receiving an expected request, the mock server will return the relevant response and move
to expecting the next request in the trace file.</p>
<p>The mock server currently only operates on a single network interface, on HTTPS (if <a class="link" href="UhmServer.html#UhmServer--tls-certificate" title="The “tls-certificate” property"><span class="type">“tls-certificate”</span></a> is set) or HTTP otherwise.
This may change in future. Your own TLS certificate can be provided to authenticate the server using <a class="link" href="UhmServer.html#UhmServer--tls-certificate" title="The “tls-certificate” property"><span class="type">“tls-certificate”</span></a>, or a dummy
TLS certificate can be used by calling <a class="link" href="UhmServer.html#uhm-server-set-default-tls-certificate" title="uhm_server_set_default_tls_certificate ()"><code class="function">uhm_server_set_default_tls_certificate()</code></a>. This certificate is not signed by a CA, so the
<span class="type">“ssl-strict”</span> property must be set to <code class="literal">FALSE</code> in client code
during (and only during!) testing.</p>
<p>The server can operate in three modes: logging, testing, and comparing. These are set by <a class="link" href="UhmServer.html#UhmServer--enable-logging" title="The “enable-logging” property"><span class="type">“enable-logging”</span></a> and <a class="link" href="UhmServer.html#UhmServer--enable-online" title="The “enable-online” property"><span class="type">“enable-online”</span></a>.
 • Logging mode (<a class="link" href="UhmServer.html#UhmServer--enable-logging" title="The “enable-logging” property"><span class="type">“enable-logging”</span></a>: <code class="literal">TRUE</code>, <a class="link" href="UhmServer.html#UhmServer--enable-online" title="The “enable-online” property"><span class="type">“enable-online”</span></a>: <code class="literal">TRUE</code>): Requests are sent to the real server online, and the
   request–response pairs recorded to a log file.
 • Testing mode (<a class="link" href="UhmServer.html#UhmServer--enable-logging" title="The “enable-logging” property"><span class="type">“enable-logging”</span></a>: <code class="literal">FALSE</code>, <a class="link" href="UhmServer.html#UhmServer--enable-online" title="The “enable-online” property"><span class="type">“enable-online”</span></a>: <code class="literal">FALSE</code>): Requests are sent to the mock server, which responds
   from the trace file.
 • Comparing mode (<a class="link" href="UhmServer.html#UhmServer--enable-logging" title="The “enable-logging” property"><span class="type">“enable-logging”</span></a>: <code class="literal">FALSE</code>, <a class="link" href="UhmServer.html#UhmServer--enable-online" title="The “enable-online” property"><span class="type">“enable-online”</span></a>: <code class="literal">TRUE</code>): Requests are sent to the real server online, and
   the request–response pairs are compared against those in an existing log file to see if the log file is up-to-date.</p>
</div>
<div class="refsect1">
<a name="UhmServer.functions_details"></a><h2>Functions</h2>
<div class="refsect2">
<a name="uhm-server-new"></a><h3>uhm_server_new ()</h3>
<pre class="programlisting"><a class="link" href="UhmServer.html" title="UhmServer"><span class="returnvalue">UhmServer</span></a> *
uhm_server_new (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<p>Creates a new <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> with default properties.</p>
<div class="refsect3">
<a name="uhm-server-new.returns"></a><h4>Returns</h4>
<p>a new <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a>; unref with <code class="function">g_object_unref()</code>. </p>
<p><span class="annotation">[<acronym title="Free data after the code is done."><span class="acronym">transfer full</span></acronym>]</span></p>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-run"></a><h3>uhm_server_run ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
uhm_server_run (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>);</pre>
<p>Runs the mock server, binding to a loopback TCP/IP interface and preparing a HTTPS server which is ready to accept requests.
The TCP/IP address and port number are chosen randomly out of the loopback addresses, and are exposed as <a class="link" href="UhmServer.html#UhmServer--address" title="The “address” property"><span class="type">“address”</span></a> and <a class="link" href="UhmServer.html#UhmServer--port" title="The “port” property"><span class="type">“port”</span></a>
once this function has returned. A <a class="link" href="UhmResolver.html" title="UhmResolver"><span class="type">UhmResolver</span></a> (exposed as <a class="link" href="UhmServer.html#UhmServer--resolver" title="The “resolver” property"><span class="type">“resolver”</span></a>) is set as the default <span class="type">GResolver</span> while the server is running.</p>
<p>The server is started in a worker thread, so this function returns immediately and the server continues to run in the background. Use <a class="link" href="UhmServer.html#uhm-server-stop" title="uhm_server_stop ()"><code class="function">uhm_server_stop()</code></a>
to shut it down.</p>
<p>This function always succeeds.</p>
<div class="refsect3">
<a name="uhm-server-run.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-stop"></a><h3>uhm_server_stop ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
uhm_server_stop (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>);</pre>
<p>Stops a mock server started by calling <a class="link" href="UhmServer.html#uhm-server-run" title="uhm_server_run ()"><code class="function">uhm_server_run()</code></a>. This shuts down the server's worker thread and unbinds it from its TCP/IP socket.</p>
<p>This unloads any trace file loaded by calling <a class="link" href="UhmServer.html#uhm-server-load-trace" title="uhm_server_load_trace ()"><code class="function">uhm_server_load_trace()</code></a> (or its asynchronous counterpart). It also resets the set of domain
names loaded into the <a class="link" href="UhmServer.html#UhmServer--resolver" title="The “resolver” property"><span class="type">“resolver”</span></a>.</p>
<p>This function always succeeds.</p>
<div class="refsect3">
<a name="uhm-server-stop.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-start-trace"></a><h3>uhm_server_start_trace ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
uhm_server_start_trace (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>,
                        <em class="parameter"><code>const <span class="type">gchar</span> *trace_name</code></em>,
                        <em class="parameter"><code><span class="type">GError</span> **error</code></em>);</pre>
<p>Starts a mock server which follows the trace file of filename <em class="parameter"><code>trace_name</code></em>
 in the <a class="link" href="UhmServer.html#UhmServer--trace-directory" title="The “trace-directory” property"><span class="type">“trace-directory”</span></a> directory.
See <a class="link" href="UhmServer.html#uhm-server-start-trace-full" title="uhm_server_start_trace_full ()"><code class="function">uhm_server_start_trace_full()</code></a> for further documentation.</p>
<p>This function has undefined behaviour if <a class="link" href="UhmServer.html#UhmServer--trace-directory" title="The “trace-directory” property"><span class="type">“trace-directory”</span></a> is <code class="literal">NULL</code>.</p>
<p>On failure, <em class="parameter"><code>error</code></em>
 will be set and the <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> state will remain unchanged. See <a class="link" href="UhmServer.html#uhm-server-start-trace-full" title="uhm_server_start_trace_full ()"><code class="function">uhm_server_start_trace_full()</code></a> for
details of the error domains used.</p>
<div class="refsect3">
<a name="uhm-server-start-trace.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>trace_name</p></td>
<td class="parameter_description"><p>name of the trace</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>return location for a <span class="type">GError</span>, or <code class="literal">NULL</code>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-start-trace-full"></a><h3>uhm_server_start_trace_full ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
uhm_server_start_trace_full (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>,
                             <em class="parameter"><code><span class="type">GFile</span> *trace_file</code></em>,
                             <em class="parameter"><code><span class="type">GError</span> **error</code></em>);</pre>
<p>Convenience function to start logging to or reading from the given <em class="parameter"><code>trace_file</code></em>
, depending on the values of <a class="link" href="UhmServer.html#UhmServer--enable-logging" title="The “enable-logging” property"><span class="type">“enable-logging”</span></a> and
<a class="link" href="UhmServer.html#UhmServer--enable-online" title="The “enable-online” property"><span class="type">“enable-online”</span></a>.</p>
<p>If <a class="link" href="UhmServer.html#UhmServer--enable-logging" title="The “enable-logging” property"><span class="type">“enable-logging”</span></a> is <code class="literal">TRUE</code>, a log handler will be set up to redirect all client network activity into the given <em class="parameter"><code>trace_file</code></em>
.
If <em class="parameter"><code>trace_file</code></em>
 already exists, it will be overwritten.</p>
<p>If <a class="link" href="UhmServer.html#UhmServer--enable-online" title="The “enable-online” property"><span class="type">“enable-online”</span></a> is <code class="literal">FALSE</code>, the given <em class="parameter"><code>trace_file</code></em>
 is loaded using <a class="link" href="UhmServer.html#uhm-server-load-trace" title="uhm_server_load_trace ()"><code class="function">uhm_server_load_trace()</code></a> and then a mock server is
started using <a class="link" href="UhmServer.html#uhm-server-run" title="uhm_server_run ()"><code class="function">uhm_server_run()</code></a>.</p>
<p>On failure, <em class="parameter"><code>error</code></em>
 will be set and the <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> state will remain unchanged. A <span class="type">GIOError</span> will be set if logging is enabled
(<a class="link" href="UhmServer.html#UhmServer--enable-logging" title="The “enable-logging” property"><span class="type">“enable-logging”</span></a>) and there is a problem writing to the trace file; or if a trace needs to be loaded and there is a problem
reading from the trace file.</p>
<div class="refsect3">
<a name="uhm-server-start-trace-full.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>trace_file</p></td>
<td class="parameter_description"><p>a trace file to load</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>return location for a <span class="type">GError</span>, or <code class="literal">NULL</code>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-end-trace"></a><h3>uhm_server_end_trace ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
uhm_server_end_trace (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>);</pre>
<p>Convenience function to finish logging to or reading from a trace file previously passed to <a class="link" href="UhmServer.html#uhm-server-start-trace" title="uhm_server_start_trace ()"><code class="function">uhm_server_start_trace()</code></a> or
<a class="link" href="UhmServer.html#uhm-server-start-trace-full" title="uhm_server_start_trace_full ()"><code class="function">uhm_server_start_trace_full()</code></a>.</p>
<p>If <a class="link" href="UhmServer.html#UhmServer--enable-online" title="The “enable-online” property"><span class="type">“enable-online”</span></a> is <code class="literal">FALSE</code>, this will shut down the mock server (as if <a class="link" href="UhmServer.html#uhm-server-stop" title="uhm_server_stop ()"><code class="function">uhm_server_stop()</code></a> had been called).</p>
<div class="refsect3">
<a name="uhm-server-end-trace.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-load-trace"></a><h3>uhm_server_load_trace ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
uhm_server_load_trace (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>,
                       <em class="parameter"><code><span class="type">GFile</span> *trace_file</code></em>,
                       <em class="parameter"><code><span class="type">GCancellable</span> *cancellable</code></em>,
                       <em class="parameter"><code><span class="type">GError</span> **error</code></em>);</pre>
<p>Synchronously loads the given <em class="parameter"><code>trace_file</code></em>
 of network messages, ready to simulate a network conversation by matching
requests against the file and returning the associated responses. Call <a class="link" href="UhmServer.html#uhm-server-run" title="uhm_server_run ()"><code class="function">uhm_server_run()</code></a> to start the mock
server afterwards.</p>
<p>Loading the trace file may be cancelled from another thread using <em class="parameter"><code>cancellable</code></em>
.</p>
<p>On error, <em class="parameter"><code>error</code></em>
 will be set and the state of the <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> will not change. A <span class="type">GIOError</span> will be set if there is
a problem reading the trace file.</p>
<div class="refsect3">
<a name="uhm-server-load-trace.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>trace_file</p></td>
<td class="parameter_description"><p>trace file to load</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>cancellable</p></td>
<td class="parameter_description"><p>a <span class="type">GCancellable</span>, or <code class="literal">NULL</code>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>return location for a <span class="type">GError</span>, or <code class="literal">NULL</code>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-load-trace-async"></a><h3>uhm_server_load_trace_async ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
uhm_server_load_trace_async (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>,
                             <em class="parameter"><code><span class="type">GFile</span> *trace_file</code></em>,
                             <em class="parameter"><code><span class="type">GCancellable</span> *cancellable</code></em>,
                             <em class="parameter"><code><span class="type">GAsyncReadyCallback</span> callback</code></em>,
                             <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>);</pre>
<p>Asynchronous version of <a class="link" href="UhmServer.html#uhm-server-load-trace" title="uhm_server_load_trace ()"><code class="function">uhm_server_load_trace()</code></a>. In <em class="parameter"><code>callback</code></em>
, call <a class="link" href="UhmServer.html#uhm-server-load-trace-finish" title="uhm_server_load_trace_finish ()"><code class="function">uhm_server_load_trace_finish()</code></a> to complete the operation.</p>
<div class="refsect3">
<a name="uhm-server-load-trace-async.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>trace_file</p></td>
<td class="parameter_description"><p>trace file to load</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>cancellable</p></td>
<td class="parameter_description"><p>a <span class="type">GCancellable</span>, or <code class="literal">NULL</code>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
<tr>
<td class="parameter_name"><p>callback</p></td>
<td class="parameter_description"><p>function to call once the async operation is complete</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>user data to pass to <em class="parameter"><code>callback</code></em>
, or <code class="literal">NULL</code>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-load-trace-finish"></a><h3>uhm_server_load_trace_finish ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
uhm_server_load_trace_finish (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>,
                              <em class="parameter"><code><span class="type">GAsyncResult</span> *result</code></em>,
                              <em class="parameter"><code><span class="type">GError</span> **error</code></em>);</pre>
<p>Finishes an asynchronous operation started by <a class="link" href="UhmServer.html#uhm-server-load-trace-async" title="uhm_server_load_trace_async ()"><code class="function">uhm_server_load_trace_async()</code></a>.</p>
<p>On error, <em class="parameter"><code>error</code></em>
 will be set and the state of the <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> will not change.
See <a class="link" href="UhmServer.html#uhm-server-load-trace" title="uhm_server_load_trace ()"><code class="function">uhm_server_load_trace()</code></a> for details on the error domains used.</p>
<div class="refsect3">
<a name="uhm-server-load-trace-finish.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>result</p></td>
<td class="parameter_description"><p>asynchronous operation result passed to the callback</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>return location for a <span class="type">GError</span>, or <code class="literal">NULL</code>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-unload-trace"></a><h3>uhm_server_unload_trace ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
uhm_server_unload_trace (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>);</pre>
<p>Unloads the current trace file of network messages, as loaded by <a class="link" href="UhmServer.html#uhm-server-load-trace" title="uhm_server_load_trace ()"><code class="function">uhm_server_load_trace()</code></a> or <a class="link" href="UhmServer.html#uhm-server-load-trace-async" title="uhm_server_load_trace_async ()"><code class="function">uhm_server_load_trace_async()</code></a>.</p>
<div class="refsect3">
<a name="uhm-server-unload-trace.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-filter-ignore-parameter-values"></a><h3>uhm_server_filter_ignore_parameter_values ()</h3>
<pre class="programlisting"><span class="returnvalue">gulong</span>
uhm_server_filter_ignore_parameter_values
                               (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>,
                                <em class="parameter"><code>const <span class="type">gchar</span> * const *parameter_names</code></em>);</pre>
<p>Install a <span class="type">“compare-messages”</span> filter function which will override the
default comparison function to one which ignores differences in the values of
the given query <em class="parameter"><code>parameter_names</code></em>
. The named parameters must still be present
in the query, however.</p>
<p>The filter will remain in place for the lifetime of the <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a>, until
<em class="parameter"><code><a class="link" href="UhmServer.html#uhm-server-compare-messages-remove-filter" title="uhm_server_compare_messages_remove_filter ()"><code class="function">uhm_server_compare_messages_remove_filter()</code></a></code></em>
 is called with the returned
filter ID.</p>
<p>Note that currently only one of the installed comparison functions will be
used. This may change in future.</p>
<div class="refsect3">
<a name="uhm-server-filter-ignore-parameter-values.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>parameter_names</p></td>
<td class="parameter_description"><p><code class="literal">NULL</code>-terminated array of
parameter names to ignore. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter points to an array of items."><span class="acronym">array</span></acronym> zero-terminated=1]</span></td>
</tr>
</tbody>
</table></div>
</div>
<div class="refsect3">
<a name="uhm-server-filter-ignore-parameter-values.returns"></a><h4>Returns</h4>
<p> opaque filter ID used with
<a class="link" href="UhmServer.html#uhm-server-compare-messages-remove-filter" title="uhm_server_compare_messages_remove_filter ()"><code class="function">uhm_server_compare_messages_remove_filter()</code></a> to remove the filter later</p>
</div>
<p class="since">Since: <a class="link" href="ix05.html#api-index-0.5.0">0.5.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-compare-messages-remove-filter"></a><h3>uhm_server_compare_messages_remove_filter ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
uhm_server_compare_messages_remove_filter
                               (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>,
                                <em class="parameter"><code><span class="type">gulong</span> filter_id</code></em>);</pre>
<p>Remove a <span class="type">“compare-messages”</span> filter function installed previously by
calling something like <a class="link" href="UhmServer.html#uhm-server-filter-ignore-parameter-values" title="uhm_server_filter_ignore_parameter_values ()"><code class="function">uhm_server_filter_ignore_parameter_values()</code></a>.</p>
<p>It is an error to call this function with an invalid <em class="parameter"><code>filter_id</code></em>
.</p>
<div class="refsect3">
<a name="uhm-server-compare-messages-remove-filter.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>filter_id</p></td>
<td class="parameter_description"><p>filter ID returned by the filter addition function</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since: <a class="link" href="ix05.html#api-index-0.5.0">0.5.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-received-message-chunk"></a><h3>uhm_server_received_message_chunk ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
uhm_server_received_message_chunk (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>,
                                   <em class="parameter"><code>const <span class="type">gchar</span> *message_chunk</code></em>,
                                   <em class="parameter"><code><span class="type">goffset</span> message_chunk_length</code></em>,
                                   <em class="parameter"><code><span class="type">GError</span> **error</code></em>);</pre>
<p>Indicates to the mock server that a single new line of a message was received from the real server. The message line may be
appended to the current trace file if logging is enabled (<a class="link" href="UhmServer.html#UhmServer--enable-logging" title="The “enable-logging” property"><span class="type">“enable-logging”</span></a> is <code class="literal">TRUE</code>), adding a newline character
at the end. If logging is disabled but online mode is enabled (<a class="link" href="UhmServer.html#UhmServer--enable-online" title="The “enable-online” property"><span class="type">“enable-online”</span></a> is <code class="literal">TRUE</code>), the message line will
be compared to the next expected line in the existing trace file. Otherwise, this function is a no-op.</p>
<p>On failure, <em class="parameter"><code>error</code></em>
 will be set and the <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> state will remain unchanged apart from the parse state machine, which will remain
in the state reached after parsing <em class="parameter"><code>message_chunk</code></em>
. A <code class="literal">G_IO_ERROR</code> will be returned if writing to the trace file failed. If in
comparison mode and the received message chunk corresponds to an unexpected message in the trace file, a <code class="literal">UHM_SERVER_ERROR</code> will
be returned.</p>
<div class="note"><p>In common cases where message log data only needs to be passed to a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> and not (for example) logged to an
application-specific file or the command line as  well, it is simpler to use <a class="link" href="UhmServer.html#uhm-server-received-message-chunk-from-soup" title="uhm_server_received_message_chunk_from_soup ()"><code class="function">uhm_server_received_message_chunk_from_soup()</code></a>, passing
it directly to <code class="function">soup_logger_set_printer()</code>. See the documentation for <a class="link" href="UhmServer.html#uhm-server-received-message-chunk-from-soup" title="uhm_server_received_message_chunk_from_soup ()"><code class="function">uhm_server_received_message_chunk_from_soup()</code></a> for details.</p></div>
<div class="refsect3">
<a name="uhm-server-received-message-chunk.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>message_chunk</p></td>
<td class="parameter_description"><p>single line of a message which was received</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>message_chunk_length</p></td>
<td class="parameter_description"><p>length of <em class="parameter"><code>message_chunk</code></em>
in bytes</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>return location for a <span class="type">GError</span>, or <code class="literal">NULL</code>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-received-message-chunk-with-direction"></a><h3>uhm_server_received_message_chunk_with_direction ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
uhm_server_received_message_chunk_with_direction
                               (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>,
                                <em class="parameter"><code><span class="type">char</span> direction</code></em>,
                                <em class="parameter"><code>const <span class="type">gchar</span> *data</code></em>,
                                <em class="parameter"><code><span class="type">goffset</span> data_length</code></em>,
                                <em class="parameter"><code><span class="type">GError</span> **error</code></em>);</pre>
<p>Convenience version of <a class="link" href="UhmServer.html#uhm-server-received-message-chunk" title="uhm_server_received_message_chunk ()"><code class="function">uhm_server_received_message_chunk()</code></a> which takes the
message <em class="parameter"><code>direction</code></em>
 and <em class="parameter"><code>data</code></em>
 separately, as provided by libsoup in a
<span class="type">SoupLoggerPrinter</span> callback.</p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="n">UhmServer</span> <span class="o">*</span><span class="n">mock_server</span><span class="p">;</span>
<span class="n">SoupSession</span> <span class="o">*</span><span class="n">session</span><span class="p">;</span>
<span class="n">SoupLogger</span> <span class="o">*</span><span class="n">logger</span><span class="p">;</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">soup_log_printer</span> <span class="p">(</span><span class="n">SoupLogger</span> <span class="o">*</span><span class="n">logger</span><span class="p">,</span> <span class="n">SoupLoggerLogLevel</span> <span class="n">level</span><span class="p">,</span> <span class="kt">char</span> <span class="n">direction</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="n">gpointer</span> <span class="n">user_data</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* Pass the data to libuhttpmock. */</span>
<span class="n">UhmServer</span> <span class="o">*</span><span class="n">mock_server</span> <span class="o">=</span> <span class="n">UHM_SERVER</span> <span class="p">(</span><span class="n">user_data</span><span class="p">);</span>
	<span class="n">uhm_server_received_message_chunk_with_direction</span> <span class="p">(</span><span class="n">mock_server</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">strlen</span> <span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">mock_server</span> <span class="o">=</span> <span class="n">uhm_server_new</span> <span class="p">();</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">soup_session_new</span> <span class="p">();</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">soup_logger_new</span> <span class="p">(</span><span class="n">SOUP_LOGGER_LOG_BODY</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="n">soup_logger_set_printer</span> <span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="p">(</span><span class="n">SoupLoggerPrinter</span><span class="p">)</span> <span class="n">soup_log_printer</span><span class="p">,</span> <span class="n">g_object_ref</span> <span class="p">(</span><span class="n">mock_server</span><span class="p">),</span> <span class="n">g_object_unref</span><span class="p">);</span>
<span class="n">soup_session_add_feature</span> <span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">SOUP_SESSION_FEATURE</span> <span class="p">(</span><span class="n">logger</span><span class="p">));</span>
<span class="n">g_object_unref</span> <span class="p">(</span><span class="n">logger</span><span class="p">);</span>

<span class="cm">/* Do something with mock_server here. */</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<div class="refsect3">
<a name="uhm-server-received-message-chunk-with-direction.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>direction</p></td>
<td class="parameter_description"><p>single character indicating the direction of message transmission</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>data</p></td>
<td class="parameter_description"><p>single line of a message which was received</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>data_length</p></td>
<td class="parameter_description"><p>length of <em class="parameter"><code>data</code></em>
in bytes</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>error</p></td>
<td class="parameter_description"><p>return location for a <span class="type">GError</span>, or <code class="literal">NULL</code>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since: <a class="link" href="ix04.html#api-index-0.3.0">0.3.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-received-message-chunk-from-soup"></a><h3>uhm_server_received_message_chunk_from_soup ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
uhm_server_received_message_chunk_from_soup
                               (<em class="parameter"><code><span class="type">SoupLogger</span> *logger</code></em>,
                                <em class="parameter"><code><span class="type">SoupLoggerLogLevel</span> level</code></em>,
                                <em class="parameter"><code><span class="type">char</span> direction</code></em>,
                                <em class="parameter"><code>const <span class="type">char</span> *data</code></em>,
                                <em class="parameter"><code><span class="type">gpointer</span> user_data</code></em>);</pre>
<p>Convenience version of <a class="link" href="UhmServer.html#uhm-server-received-message-chunk" title="uhm_server_received_message_chunk ()"><code class="function">uhm_server_received_message_chunk()</code></a> which can be passed directly to <code class="function">soup_logger_set_printer()</code>
to forward all libsoup traffic logging to a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a>. The <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> must be passed to <code class="function">soup_logger_set_printer()</code> as
its user data.</p>
<div class="informalexample">
  <table class="listing_frame" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr>
        <td class="listing_lines" align="right"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td>
        <td class="listing_code"><pre class="programlisting"><span class="n">UhmServer</span> <span class="o">*</span><span class="n">mock_server</span><span class="p">;</span>
<span class="n">SoupSession</span> <span class="o">*</span><span class="n">session</span><span class="p">;</span>
<span class="n">SoupLogger</span> <span class="o">*</span><span class="n">logger</span><span class="p">;</span>

<span class="n">mock_server</span> <span class="o">=</span> <span class="n">uhm_server_new</span> <span class="p">();</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">soup_session_new</span> <span class="p">();</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">soup_logger_new</span> <span class="p">(</span><span class="n">SOUP_LOGGER_LOG_BODY</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="n">soup_logger_set_printer</span> <span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="n">uhm_server_received_message_chunk_from_soup</span><span class="p">,</span> <span class="n">g_object_ref</span> <span class="p">(</span><span class="n">mock_server</span><span class="p">),</span> <span class="n">g_object_unref</span><span class="p">);</span>
<span class="n">soup_session_add_feature</span> <span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">SOUP_SESSION_FEATURE</span> <span class="p">(</span><span class="n">logger</span><span class="p">));</span>
<span class="n">g_object_unref</span> <span class="p">(</span><span class="n">logger</span><span class="p">);</span>

<span class="cm">/* Do something with mock_server here. */</span></pre></td>
      </tr>
    </tbody>
  </table>
</div>

<div class="refsect3">
<a name="uhm-server-received-message-chunk-from-soup.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>logger</p></td>
<td class="parameter_description"><p>a <span class="type">SoupLogger</span></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>level</p></td>
<td class="parameter_description"><p>the detail level of this log message</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>direction</p></td>
<td class="parameter_description"><p>the transmission direction of the message</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>data</p></td>
<td class="parameter_description"><p>message data</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>user data passed to the <span class="type">SoupLogger</span>, or <code class="literal">NULL</code>. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since: <a class="link" href="ix04.html#api-index-0.3.0">0.3.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-get-enable-logging"></a><h3>uhm_server_get_enable_logging ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>
uhm_server_get_enable_logging (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>);</pre>
<p>Gets the value of the <a class="link" href="UhmServer.html#UhmServer--enable-logging" title="The “enable-logging” property"><span class="type">“enable-logging”</span></a> property.</p>
<div class="refsect3">
<a name="uhm-server-get-enable-logging.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="uhm-server-get-enable-logging.returns"></a><h4>Returns</h4>
<p> <code class="literal">TRUE</code> if client network traffic is being logged to a trace file; <code class="literal">FALSE</code> otherwise</p>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-set-enable-logging"></a><h3>uhm_server_set_enable_logging ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
uhm_server_set_enable_logging (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>,
                               <em class="parameter"><code><span class="type">gboolean</span> enable_logging</code></em>);</pre>
<p>Sets the value of the <a class="link" href="UhmServer.html#UhmServer--enable-logging" title="The “enable-logging” property"><span class="type">“enable-logging”</span></a> property.</p>
<div class="refsect3">
<a name="uhm-server-set-enable-logging.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>enable_logging</p></td>
<td class="parameter_description"><p><code class="literal">TRUE</code> to log client network traffic to a trace file; <code class="literal">FALSE</code> otherwise</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-get-enable-online"></a><h3>uhm_server_get_enable_online ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>
uhm_server_get_enable_online (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>);</pre>
<p>Gets the value of the <a class="link" href="UhmServer.html#UhmServer--enable-online" title="The “enable-online” property"><span class="type">“enable-online”</span></a> property.</p>
<div class="refsect3">
<a name="uhm-server-get-enable-online.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="uhm-server-get-enable-online.returns"></a><h4>Returns</h4>
<p> <code class="literal">TRUE</code> if the server does not intercept and handle network connections from client code; <code class="literal">FALSE</code> otherwise</p>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-set-enable-online"></a><h3>uhm_server_set_enable_online ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
uhm_server_set_enable_online (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>,
                              <em class="parameter"><code><span class="type">gboolean</span> enable_online</code></em>);</pre>
<p>Sets the value of the <a class="link" href="UhmServer.html#UhmServer--enable-online" title="The “enable-online” property"><span class="type">“enable-online”</span></a> property.</p>
<div class="refsect3">
<a name="uhm-server-set-enable-online.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>enable_online</p></td>
<td class="parameter_description"><p><code class="literal">TRUE</code> to not intercept and handle network connections from client code; <code class="literal">FALSE</code> otherwise</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-get-trace-directory"></a><h3>uhm_server_get_trace_directory ()</h3>
<pre class="programlisting"><span class="returnvalue">GFile</span> *
uhm_server_get_trace_directory (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>);</pre>
<p>Gets the value of the <a class="link" href="UhmServer.html#UhmServer--trace-directory" title="The “trace-directory” property"><span class="type">“trace-directory”</span></a> property.</p>
<div class="refsect3">
<a name="uhm-server-get-trace-directory.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="uhm-server-get-trace-directory.returns"></a><h4>Returns</h4>
<p>the directory to load/store trace files from, or <code class="literal">NULL</code>. </p>
<p><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>][<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span></p>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-set-trace-directory"></a><h3>uhm_server_set_trace_directory ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
uhm_server_set_trace_directory (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>,
                                <em class="parameter"><code><span class="type">GFile</span> *trace_directory</code></em>);</pre>
<p>Sets the value of the <a class="link" href="UhmServer.html#UhmServer--trace-directory" title="The “trace-directory” property"><span class="type">“trace-directory”</span></a> property.</p>
<div class="refsect3">
<a name="uhm-server-set-trace-directory.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>trace_directory</p></td>
<td class="parameter_description"><p>a directory to load/store trace files from, or <code class="literal">NULL</code> to unset it. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>][<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span></td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-get-tls-certificate"></a><h3>uhm_server_get_tls_certificate ()</h3>
<pre class="programlisting"><span class="returnvalue">GTlsCertificate</span> *
uhm_server_get_tls_certificate (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>);</pre>
<p>Gets the value of the <a class="link" href="UhmServer.html#UhmServer--tls-certificate" title="The “tls-certificate” property"><span class="type">“tls-certificate”</span></a> property.</p>
<div class="refsect3">
<a name="uhm-server-get-tls-certificate.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="uhm-server-get-tls-certificate.returns"></a><h4>Returns</h4>
<p>the server's current TLS certificate; or <code class="literal">NULL</code> if it's serving HTTP only. </p>
<p><span class="annotation">[<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>][<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></p>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-set-tls-certificate"></a><h3>uhm_server_set_tls_certificate ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
uhm_server_set_tls_certificate (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>,
                                <em class="parameter"><code><span class="type">GTlsCertificate</span> *tls_certificate</code></em>);</pre>
<p>Sets the value of the <a class="link" href="UhmServer.html#UhmServer--tls-certificate" title="The “tls-certificate” property"><span class="type">“tls-certificate”</span></a> property.</p>
<div class="refsect3">
<a name="uhm-server-set-tls-certificate.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>tls_certificate</p></td>
<td class="parameter_description"><p>TLS certificate for the server to use; or <code class="literal">NULL</code> to serve HTTP only. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-set-default-tls-certificate"></a><h3>uhm_server_set_default_tls_certificate ()</h3>
<pre class="programlisting"><span class="returnvalue">GTlsCertificate</span> *
uhm_server_set_default_tls_certificate
                               (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>);</pre>
<p>Sets the value of the <a class="link" href="UhmServer.html#UhmServer--tls-certificate" title="The “tls-certificate” property"><span class="type">“tls-certificate”</span></a> property to the default TLS certificate built in to libuhttpmock.
This default certificate is not signed by any certificate authority, and contains minimal metadata details. It may
be used by clients which have no special certificate requirements; clients which have special requirements should
construct a custom <span class="type">GTlsCertificate</span> and pass it to <a class="link" href="UhmServer.html#uhm-server-set-tls-certificate" title="uhm_server_set_tls_certificate ()"><code class="function">uhm_server_set_tls_certificate()</code></a>.</p>
<div class="refsect3">
<a name="uhm-server-set-default-tls-certificate.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="uhm-server-set-default-tls-certificate.returns"></a><h4>Returns</h4>
<p>the default certificate set as <a class="link" href="UhmServer.html#UhmServer--tls-certificate" title="The “tls-certificate” property"><span class="type">“tls-certificate”</span></a>. </p>
<p><span class="annotation">[<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span></p>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-set-expected-domain-names"></a><h3>uhm_server_set_expected_domain_names ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>
uhm_server_set_expected_domain_names (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>,
                                      <em class="parameter"><code>const <span class="type">gchar</span> * const *domain_names</code></em>);</pre>
<p>Set the domain names which are expected to have requests made of them by the client code interacting with this <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a>.
This is a convenience method which calls <a class="link" href="UhmResolver.html#uhm-resolver-add-A" title="uhm_resolver_add_A ()"><code class="function">uhm_resolver_add_A()</code></a> on the server’s <a class="link" href="UhmResolver.html" title="UhmResolver"><span class="type">UhmResolver</span></a> for each of the domain names
listed in <em class="parameter"><code>domain_names</code></em>
. It associates them with the server’s current IP address, and automatically updates the mappings
if the IP address or resolver change.</p>
<p>Note that this will reset all records on the server’s <a class="link" href="UhmResolver.html" title="UhmResolver"><span class="type">UhmResolver</span></a>, replacing all of them with the provided <em class="parameter"><code>domain_names</code></em>
.</p>
<p>It is safe to add further domain names to the <a class="link" href="UhmResolver.html" title="UhmResolver"><span class="type">UhmResolver</span></a> in a callback for the <span class="type">“notify”</span> signal for <a class="link" href="UhmServer.html#UhmServer--resolver" title="The “resolver” property"><span class="type">“resolver”</span></a>;
that signal is emitted after the resolver is cleared and these <em class="parameter"><code>domain_names</code></em>
 are added.</p>
<div class="refsect3">
<a name="uhm-server-set-expected-domain-names.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>domain_names</p></td>
<td class="parameter_description"><p><code class="literal">NULL</code>-terminated array of domain names to expect, or <code class="literal">NULL</code> to not expect any. </p></td>
<td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter points to an array of items."><span class="acronym">array</span></acronym> zero-terminated=1][<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>][<acronym title="Generics and defining elements of containers and arrays."><span class="acronym">element-type</span></acronym> utf8]</span></td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since: <a class="link" href="ix04.html#api-index-0.3.0">0.3.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-get-address"></a><h3>uhm_server_get_address ()</h3>
<pre class="programlisting">const <span class="returnvalue">gchar</span> *
uhm_server_get_address (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>);</pre>
<p>Gets the value of the <a class="link" href="UhmServer.html#UhmServer--address" title="The “address” property"><span class="type">“address”</span></a> property.</p>
<div class="refsect3">
<a name="uhm-server-get-address.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="uhm-server-get-address.returns"></a><h4>Returns</h4>
<p>the physical address of the listening socket the server is currently bound to; or <code class="literal">NULL</code> if the server is not running. </p>
<p><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>][<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span></p>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-get-port"></a><h3>uhm_server_get_port ()</h3>
<pre class="programlisting"><span class="returnvalue">guint</span>
uhm_server_get_port (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>);</pre>
<p>Gets the value of the <a class="link" href="UhmServer.html#UhmServer--port" title="The “port” property"><span class="type">“port”</span></a> property.</p>
<div class="refsect3">
<a name="uhm-server-get-port.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="uhm-server-get-port.returns"></a><h4>Returns</h4>
<p> the port of the listening socket the server is currently bound to; or <code class="code">0</code> if the server is not running</p>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="uhm-server-get-resolver"></a><h3>uhm_server_get_resolver ()</h3>
<pre class="programlisting"><a class="link" href="UhmResolver.html" title="UhmResolver"><span class="returnvalue">UhmResolver</span></a> *
uhm_server_get_resolver (<em class="parameter"><code><a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> *self</code></em>);</pre>
<p>Gets the value of the <a class="link" href="UhmServer.html#UhmServer--resolver" title="The “resolver” property"><span class="type">“resolver”</span></a> property.</p>
<div class="refsect3">
<a name="uhm-server-get-resolver.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody><tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3">
<a name="uhm-server-get-resolver.returns"></a><h4>Returns</h4>
<p>the mock resolver in use by the mock server, or <code class="literal">NULL</code> if no resolver is active. </p>
<p><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>][<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span></p>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
</div>
<div class="refsect1">
<a name="UhmServer.other_details"></a><h2>Types and Values</h2>
<div class="refsect2">
<a name="UhmServer-struct"></a><h3>UhmServer</h3>
<pre class="programlisting">typedef struct _UhmServer UhmServer;</pre>
<p>All the fields in the <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> structure are private and should never be accessed directly.</p>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="UhmServerClass"></a><h3>UhmServerClass</h3>
<pre class="programlisting">typedef struct {
	gboolean (*handle_message) (UhmServer *self, SoupMessage *message, SoupClientContext *client);
	gboolean (*compare_messages) (UhmServer *self, SoupMessage *expected_message, SoupMessage *actual_message, SoupClientContext *actual_client);
} UhmServerClass;
</pre>
<p>Most of the fields in the <a class="link" href="UhmServer.html#UhmServerClass" title="UhmServerClass"><span class="type">UhmServerClass</span></a> structure are private and should never be accessed directly.</p>
<div class="refsect3">
<a name="UhmServerClass.members"></a><h4>Members</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="300px" class="struct_members_name">
<col class="struct_members_description">
<col width="200px" class="struct_members_annotations">
</colgroup>
<tbody>
<tr>
<td class="struct_member_name"><p><em class="structfield"><code><a name="UhmServerClass.handle-message"></a>handle_message</code></em> ()</p></td>
<td class="struct_member_description"><p>Class handler for the <a class="link" href="UhmServer.html#UhmServer-handle-message" title="The “handle-message” signal"><span class="type">“handle-message”</span></a> signal. Subclasses may implement this to override the
default handler for the signal. The default handler should always return <code class="literal">TRUE</code> to indicate that it has handled
the <em class="parameter"><code>message</code></em>
from <em class="parameter"><code>client</code></em>
by setting an appropriate response on the <span class="type">SoupMessage</span>.</p></td>
<td class="struct_member_annotations"> </td>
</tr>
<tr>
<td class="struct_member_name"><p><em class="structfield"><code><a name="UhmServerClass.compare-messages"></a>compare_messages</code></em> ()</p></td>
<td class="struct_member_description"><p>Class handler for the <a class="link" href="UhmServer.html#UhmServer-compare-messages" title="The “compare-messages” signal"><span class="type">“compare-messages”</span></a> signal. Subclasses may implement this to override
the default handler for the signal. The handler should return <code class="literal">TRUE</code> if <em class="parameter"><code>expected_message</code></em>
and <em class="parameter"><code>actual_message</code></em>
compare
equal, and <code class="literal">FALSE</code> otherwise.</p></td>
<td class="struct_member_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="UhmServerError"></a><h3>enum UhmServerError</h3>
<p>Error codes for <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a> operations.</p>
<div class="refsect3">
<a name="UhmServerError.members"></a><h4>Members</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="300px" class="enum_members_name">
<col class="enum_members_description">
<col width="200px" class="enum_members_annotations">
</colgroup>
<tbody><tr>
<td class="enum_member_name"><p><a name="UHM-SERVER-ERROR-MESSAGE-MISMATCH:CAPS"></a>UHM_SERVER_ERROR_MESSAGE_MISMATCH</p></td>
<td class="enum_member_description">
<p>In comparison mode, a message received from the client did not match the next message in the current trace file.</p>
</td>
<td class="enum_member_annotations"> </td>
</tr></tbody>
</table></div>
</div>
</div>
</div>
<div class="refsect1">
<a name="UhmServer.property-details"></a><h2>Property Details</h2>
<div class="refsect2">
<a name="UhmServer--address"></a><h3>The <code class="literal">“address”</code> property</h3>
<pre class="programlisting">  “address”                  <span class="type">gchar</span> *</pre>
<p>Address of the local mock server if it's running, or <code class="literal">NULL</code> otherwise. This will be non-<code class="literal">NULL</code> between calls to <a class="link" href="UhmServer.html#uhm-server-run" title="uhm_server_run ()"><code class="function">uhm_server_run()</code></a> and
<a class="link" href="UhmServer.html#uhm-server-stop" title="uhm_server_stop ()"><code class="function">uhm_server_stop()</code></a>. The address is a physical IP address, e.g. <code class="code">127.0.0.1</code>.</p>
<p>This should not normally need to be passed into client code under test, unless the code references IP addresses specifically. The mock server
runs a DNS resolver which automatically redirects client requests for known domain names to this address (<a class="link" href="UhmServer.html#UhmServer--resolver" title="The “resolver” property"><span class="type">“resolver”</span></a>).</p>
<p>Owner: UhmServer</p>
<p>Flags: Read</p>
<p>Default value: NULL</p>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="UhmServer--enable-logging"></a><h3>The <code class="literal">“enable-logging”</code> property</h3>
<pre class="programlisting">  “enable-logging”           <span class="type">gboolean</span></pre>
<p><code class="literal">TRUE</code> if network traffic should be logged to a trace file (specified by calling <a class="link" href="UhmServer.html#uhm-server-start-trace" title="uhm_server_start_trace ()"><code class="function">uhm_server_start_trace()</code></a>). This operates independently
of whether traffic is online or being handled locally by the mock server.
Use this in conjunction with <a class="link" href="UhmServer.html#UhmServer--enable-online" title="The “enable-online” property"><span class="type">“enable-online”</span></a> to either log online traffic, or replay logged traffic locally.</p>
<p>Owner: UhmServer</p>
<p>Flags: Read / Write</p>
<p>Default value: FALSE</p>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="UhmServer--enable-online"></a><h3>The <code class="literal">“enable-online”</code> property</h3>
<pre class="programlisting">  “enable-online”            <span class="type">gboolean</span></pre>
<p><code class="literal">TRUE</code> if network traffic should reach the Internet as normal; <code class="literal">FALSE</code> to redirect it to the local mock server.
Use this in conjunction with <a class="link" href="UhmServer.html#UhmServer--enable-logging" title="The “enable-logging” property"><span class="type">“enable-logging”</span></a> to either log online traffic, or replay logged traffic locally.</p>
<p>Owner: UhmServer</p>
<p>Flags: Read / Write</p>
<p>Default value: FALSE</p>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="UhmServer--port"></a><h3>The <code class="literal">“port”</code> property</h3>
<pre class="programlisting">  “port”                     <span class="type">guint</span></pre>
<p>Port of the local mock server if it's running, or <code class="code">0</code> otherwise. This will be non-<code class="code">0</code> between
calls to <a class="link" href="UhmServer.html#uhm-server-run" title="uhm_server_run ()"><code class="function">uhm_server_run()</code></a> and <a class="link" href="UhmServer.html#uhm-server-stop" title="uhm_server_stop ()"><code class="function">uhm_server_stop()</code></a>.</p>
<p>It is intended that this port be passed into the client code under test, to substitute for the default HTTPS port (443) which it would otherwise
use.</p>
<p>Owner: UhmServer</p>
<p>Flags: Read</p>
<p>Default value: 0</p>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="UhmServer--resolver"></a><h3>The <code class="literal">“resolver”</code> property</h3>
<pre class="programlisting">  “resolver”                 <a class="link" href="UhmResolver.html" title="UhmResolver"><span class="type">UhmResolver</span></a> *</pre>
<p>Mock resolver used to redirect HTTP requests from specified domain names to the local mock server instance. This will always be set while the
server is running (between calls to <a class="link" href="UhmServer.html#uhm-server-run" title="uhm_server_run ()"><code class="function">uhm_server_run()</code></a> and <a class="link" href="UhmServer.html#uhm-server-stop" title="uhm_server_stop ()"><code class="function">uhm_server_stop()</code></a>), and is <code class="literal">NULL</code> otherwise.</p>
<p>Use the resolver specified in this property to add domain names which are expected to be requested by the current trace. Domain names not added
to the resolver will be rejected by the mock server. The set of domain names in the resolver will be reset when <a class="link" href="UhmServer.html#uhm-server-stop" title="uhm_server_stop ()"><code class="function">uhm_server_stop()</code></a> is
called.</p>
<p>Owner: UhmServer</p>
<p>Flags: Read</p>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="UhmServer--tls-certificate"></a><h3>The <code class="literal">“tls-certificate”</code> property</h3>
<pre class="programlisting">  “tls-certificate”          <span class="type">GTlsCertificate</span> *</pre>
<p>TLS certificate for the mock server to use when serving HTTPS pages. If this is non-<code class="literal">NULL</code>, the server will always use HTTPS. If it is <code class="literal">NULL</code>,
the server will always use HTTP. The TLS certificate may be changed after constructing the <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a>, but changes to the property will not
take effect until the next call to <a class="link" href="UhmServer.html#uhm-server-run" title="uhm_server_run ()"><code class="function">uhm_server_run()</code></a>.</p>
<p>A certificate and private key may be generated by executing:</p>
<code class="code">openssl req -x509 -newkey rsa:2048 -keyout key.pem -out cert.pem -nodes</code>. These files may then be used to construct a
<p><span class="type">GTlsCertificate</span> by calling <code class="function">g_tls_certificate_new_from_files()</code>.</p>
<p>Alternatively, a default <span class="type">GTlsCertificate</span> which wraps a dummy certificate (not signed by any certificate authority) may be set by
calling <a class="link" href="UhmServer.html#uhm-server-set-default-tls-certificate" title="uhm_server_set_default_tls_certificate ()"><code class="function">uhm_server_set_default_tls_certificate()</code></a>. This may be used as the <a class="link" href="UhmServer.html#UhmServer--tls-certificate" title="The “tls-certificate” property"><span class="type">“tls-certificate”</span></a> if the code under test has no specific
requirements of the certificate used by the mock server it's tested against.</p>
<p>Owner: UhmServer</p>
<p>Flags: Read / Write</p>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="UhmServer--trace-directory"></a><h3>The <code class="literal">“trace-directory”</code> property</h3>
<pre class="programlisting">  “trace-directory”          <span class="type">GFile</span> *</pre>
<p>Directory relative to which all trace files specified in calls to <a class="link" href="UhmServer.html#uhm-server-start-trace" title="uhm_server_start_trace ()"><code class="function">uhm_server_start_trace()</code></a> will be resolved.
This is not used for any other methods, but must be non-<code class="literal">NULL</code> if <a class="link" href="UhmServer.html#uhm-server-start-trace" title="uhm_server_start_trace ()"><code class="function">uhm_server_start_trace()</code></a> is called.</p>
<p>Owner: UhmServer</p>
<p>Flags: Read / Write</p>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
</div>
<div class="refsect1">
<a name="UhmServer.signal-details"></a><h2>Signal Details</h2>
<div class="refsect2">
<a name="UhmServer-compare-messages"></a><h3>The <code class="literal">“compare-messages”</code> signal</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>
user_function (<a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a>         *self,
               <span class="type">SoupMessage</span>       *expected_message,
               <span class="type">SoupMessage</span>       *actual_message,
               <span class="type">SoupClientContext</span> *actual_client,
               <span class="type">gpointer</span>           user_data)</pre>
<p>Emitted whenever the mock server must compare two <span class="type">SoupMessage</span>s for equality; e.g. when in the testing or comparison modes.
Test code may connect to this signal and implement a handler which checks custom properties of the messages. The default handler compares
the URI and method of the messages, but no headers and not the message bodies.</p>
<p>Signal handlers should return <code class="literal">TRUE</code> if the messages match; and <code class="literal">FALSE</code> otherwise. The first signal handler executed when
this signal is emitted wins.</p>
<div class="refsect3">
<a name="UhmServer-compare-messages.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>expected_message</p></td>
<td class="parameter_description"><p>a message containing the expected HTTP(S) message provided by <a class="link" href="UhmServer.html#UhmServer-handle-message" title="The “handle-message” signal"><span class="type">“handle-message”</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>actual_message</p></td>
<td class="parameter_description"><p>a message containing the incoming HTTP(S) request</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>actual_client</p></td>
<td class="parameter_description"><p>additional data about the HTTP client making the request</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>user data set when the signal handler was connected.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p>Flags: Run Last</p>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
<hr>
<div class="refsect2">
<a name="UhmServer-handle-message"></a><h3>The <code class="literal">“handle-message”</code> signal</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>
user_function (<a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a>         *self,
               <span class="type">SoupMessage</span>       *message,
               <span class="type">SoupClientContext</span> *client,
               <span class="type">gpointer</span>           user_data)</pre>
<p>Emitted whenever the mock server is running and receives a request from a client. Test code may connect to this signal and implement a handler
which builds and returns a suitable response for a given message. The default handler reads a request–response pair from the current trace file,
matches the requests and then returns the given response. If the requests don't match, an error is raised.</p>
<p>Signal handlers should return <code class="literal">TRUE</code> if they have handled the request and set an appropriate response; and <code class="literal">FALSE</code> otherwise.</p>
<div class="refsect3">
<a name="UhmServer-handle-message.parameters"></a><h4>Parameters</h4>
<div class="informaltable"><table class="informaltable" width="100%" border="0">
<colgroup>
<col width="150px" class="parameters_name">
<col class="parameters_description">
<col width="200px" class="parameters_annotations">
</colgroup>
<tbody>
<tr>
<td class="parameter_name"><p>self</p></td>
<td class="parameter_description"><p>a <a class="link" href="UhmServer.html" title="UhmServer"><span class="type">UhmServer</span></a></p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>message</p></td>
<td class="parameter_description"><p>a message containing the incoming HTTP(S) request, and which the outgoing HTTP(S) response should be set on</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>client</p></td>
<td class="parameter_description"><p>additional data about the HTTP client making the request</p></td>
<td class="parameter_annotations"> </td>
</tr>
<tr>
<td class="parameter_name"><p>user_data</p></td>
<td class="parameter_description"><p>user data set when the signal handler was connected.</p></td>
<td class="parameter_annotations"> </td>
</tr>
</tbody>
</table></div>
</div>
<p>Flags: Run Last</p>
<p class="since">Since: <a class="link" href="ix03.html#api-index-0.1.0">0.1.0</a></p>
</div>
</div>
</div>
<div class="footer">
<hr>Generated by GTK-Doc V1.32.1</div>
</body>
</html>